!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash"),require("xmlbuilder")):"function"==typeof define&&define.amd?define(["exports","lodash","xmlbuilder"],t):t((e=e||self).JSXXML={},e.lodash,e.xmlbuilder)}(this,function(e,i,o){"use strict";function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(r,!0).forEach(function(e){u(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}i=i&&i.hasOwnProperty("default")?i.default:i,o=o&&o.hasOwnProperty("default")?o.default:o;function f(e){return i.isString(e)||i.isNumber(e)}function t(e){var t=0<arguments.length&&void 0!==e?e:[];if(t=i.flattenDeep([t]),t=i.filter(t,function(e){return!i.isNaN(e)}),!i.every(t,f))throw Error("all child should be string or number");return t.join("")}e.CData=function(e){return{"#cdata":t(e.children)}},e.Comment=function(e){return{"#comment":t(e.children)}},e.Fragment=function(e){var t=e.children;return i.flattenDeep([void 0===t?[]:t])},e.JSXXML=function(e,t){for(var r=arguments.length,n=Array(2<r?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];if(i.isFunction(e))return e(c({},t,{},0<n.length?{children:n}:{}));if(i.isString(e))return n=function(e){return i.reduce(i.flatMapDeep(e),function(e,t){if(f(t)){if(0===e.length)return e.push({"#text":"".concat(t)}),e;var r=e[e.length-1];return i.has(r,"#text")?r["#text"]="".concat(r["#text"]).concat(t):e.push({"#text":"".concat(t)}),e}return i.isObject(t)&&e.push(t),e},[])}(n),t=i.omitBy(t,function(e,t){return t.startsWith("__")}),t=i.mapKeys(t,function(e,t){return"@"+t}),u({},e,[].concat(a(i.isEmpty(t)?[]:[t]),a(n)));throw Error("type should be function or string")},e.Raw=function(e){return{"#raw":t(e.children)}},e.render=function(e,t){var r=1<arguments.length&&void 0!==t?t:{},n=r.endOptions;return o.create(e,r.xmldec,r.doctype,c({},r.createOptions,{separateArrayItems:!0})).end(n)},Object.defineProperty(e,"__esModule",{value:!0})});
